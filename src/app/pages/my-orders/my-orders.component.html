<app-header />
<div class="container py-4">
  <h2 class="mb-4">All Orders</h2>
  @if (orders.length === 0) {
  <p class="text-center text-muted">No orders found. Start shopping now to place your first order!</p>
  } @for (order of orders; track $index) {
  <div class="order-card card mb-4 shadow-sm">
    <div
      class="card-header d-flex justify-content-between align-items-center flex-wrap"
    >
      <div>
        <strong>Order ID:</strong> {{ order._id }}<br />
        <strong>Status:</strong>&nbsp;
        <span [style.background]="'#4f46e5'" class="badge text-capitalize">{{
          order.status
        }}</span>
      </div>
      <div><strong>Date:</strong> {{ order.date | date : "medium" }}</div>
    </div>

    <div class="card-body">
      <h5 class="mb-3">Shipping Address</h5>
      <p class="mb-1">
        <strong>Name: </strong> {{ order.address?.firstName }}
        {{ order.address?.lastName }}<br />
      </p>

      <p class="mb-1">
        <strong>Phone:</strong> {{ order.address?.phoneNumber }}
      </p>

      <p class="mb-3"><strong>Email:</strong> {{ order.address?.email }}</p>

      <p class="mb-3"><strong>Payment Type:</strong> {{ order.paymentType }}</p>

      <div class="products mt-4">
        <h5 class="mb-3">Products</h5>
        @for (item of order.items; track $index) {
        <div class="product d-flex align-items-center mb-3 flex-wrap">
          <img
            [src]="item.product?.images?.[0]"
            alt="{{ item.product?.name }}"
            class="product-img img-thumbnail me-3 mb-2"
          />
          <div>
            <h6 class="mb-1">{{ item.product?.name }}</h6>
            <p class="mb-1">Qty: {{ item.quantity }}</p>
            <p class="mb-1 text-muted">
              Price:
              <span [style.color]="'#4f46e5'" class="fw-semibold"
                >${{ item.product?.price }}</span
              >
              @if (item.product?.discount > 0) {
              <span class="text-danger ms-2"
                >-{{ item.product.discount }}%</span
              >
              }
            </p>
            <p class="small text-secondary">
              {{ item.product?.shotDescription }}
            </p>
          </div>
        </div>
        }
      </div>
    </div>
  </div>
  }
</div>

<app-footer />
