<div class="container-fluid py-4">
  <h3 class="mb-4">Order Management</h3>
  <div class="card">
    <p-table
      #dt1
      [value]="orders"
      [globalFilterFields]="[
        'orderId',
        'customer',
        'paymentType',
        'date',
        'total',
        'status'
      ]"
      [rows]="5"
      [paginator]="true"
      dataKey="orderId"
      stateStorage="session"
      stateKey="order-management"
    >
      <ng-template #caption>
        <p-iconfield iconPosition="left">
          <p-inputicon>
            <i class="pi pi-search"></i>
          </p-inputicon>
          <input
            pInputText
            type="text"
            [value]="getGlobalFilterValue(dt1.filters?.['global'])"
            (input)="dt1.filterGlobal($any($event.target).value, 'contains')"
            placeholder="Global Search"
          />
        </p-iconfield>
      </ng-template>

      <ng-template #header>
        <tr>
          <th pSortableColumn="orderId">
            Order ID <p-sortIcon field="orderId" />
          </th>
          <th pSortableColumn="customer">
            Customer <p-sortIcon field="customer" />
          </th>
          <th pSortableColumn="paymentType">
            Payment Type <p-sortIcon field="paymentType" />
          </th>
          <th pSortableColumn="date">Date <p-sortIcon field="date" /></th>
          <th pSortableColumn="total">Total <p-sortIcon field="total" /></th>
          <th pSortableColumn="status">Status <p-sortIcon field="status" /></th>
          <th>Actions</th>
        </tr>
      </ng-template>

      <ng-template #body let-order>
        <tr>
          <td>{{ order.orderId }}</td>
          <td>{{ order.customer }}</td>
          <td>{{ order.paymentType }}</td>
          <td>{{ order.date }}</td>
          <td>${{ order.total }}</td>
          <td>
            <select class="form-select form-select-sm">
              <option [selected]="order.status === 'Completed'">
                Completed
              </option>
              <option [selected]="order.status === 'Pending'">Pending</option>
              <option [selected]="order.status === 'Cancelled'">
                Cancelled
              </option>
              <option [selected]="order.status === 'Processing'">
                Processing
              </option>
            </select>
          </td>
          <td>
            <button class="btn btn-sm btn-danger" title="Delete">
              <i class="pi pi-trash mt-1"></i>
            </button>
          </td>
        </tr>
      </ng-template>

      <ng-template emptymessage>
        <tr>
          <td colspan="7">No orders found.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
